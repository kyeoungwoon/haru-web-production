pre-commit:
  parallel: true
  commands:
    eslint:
      glob: '**/*.{js,ts,jsx,tsx}'
      run: |
        echo "ğŸ” ========================================="
        echo "ğŸ”§ Running ESLint on staged files..."
        echo "ğŸ” ========================================="
        pnpm exec eslint {staged_files} --fix || exit 1
        echo "âœ… ESLint completed successfully!"
      stage_fixed: true
    prettier:
      glob: '**/*.{js,ts,jsx,tsx,json,yaml,md,css}'
      run: |
        echo "ğŸ’… ========================================="
        echo "ğŸ¨ Running Prettier on staged files..."
        echo "ğŸ’… ========================================="
        pnpm exec prettier --write {staged_files} || exit 1
        echo "âœ… Code formatting completed!"
      stage_fixed: true
    type-check:
      run: |
        echo "ğŸ” ========================================="
        echo "ğŸ“ Running TypeScript type checking..."
        echo "ğŸ” ========================================="
        pnpm type-check || exit 1
        echo "âœ… Type checking completed successfully!"

prepare-commit-msg: # ì›ë˜ëŠ” ì•„ì˜ˆ í•„ìš”ê°€ ì—†ìŒ, í•˜ì§€ë§Œ ì¶”í›„ gitmoji ìë™ ìƒì„±ì„ ìœ„í•´ ë‚¨ê²¨ë‘¡ë‹ˆë‹¤.
  commands:
    add-prefix:
      run: |
        echo "ğŸ“ ========================================="
        echo "ğŸ·ï¸  Preparing commit message..."
        echo "ğŸ“ ========================================="
        node scripts/prepare-commit-msg.cjs {{1}} || exit 1
        echo "âœ… Commit message prepared!"

commit-msg:
  commands:
    lint-message:
      run: |
        echo "ğŸ“‹ ========================================="
        echo "ğŸ” Validating commit message format..."
        echo "ğŸ“‹ ========================================="
        node scripts/run-commitlint.cjs {{1}} || exit 1
        echo "âœ… Commit message validation passed!"

pre-rebase:
  commands:
    check-clean:
      run: |
        echo "ğŸ”„ ========================================="
        echo "ğŸ§¹ Checking repository cleanliness..."
        echo "ğŸ”„ ========================================="
        node scripts/pre-rebase-check.cjs || exit 1
        echo "âœ… Repository clean check completed!"

pre-push:
  commands:
    build:
      run: |
        echo "ğŸš€ ========================================="
        echo "ğŸš€ Starting build for push verification..."
        echo "ğŸš€ ========================================="
        echo "ğŸ“Š Step 1/2: Running type check..."
        if pnpm type-check; then
          echo "âœ… Type check passed successfully!"
          echo "ğŸ“Š Step 2/2: Building project..."
          echo "ğŸ”¨ ========================================="
          echo "ğŸ—ï¸ Running production build..."
          echo "ğŸ”¨ ========================================="
          pnpm build || exit 1
          echo "ğŸ‰ ========================================="
          echo "âœ… Build completed successfully!"
          echo "ğŸš€ Ready to push!"
          echo "ğŸ‰ ========================================="
        else
          echo "âŒ ========================================="
          echo "âŒ Type check failed!"
          echo "ğŸš« Build skipped - fix type errors first"
          echo "âŒ ========================================="
          exit 1
        fi
